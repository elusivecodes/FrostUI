!function(t,e){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e:Object.assign(t,e(t))}(window,(function(t){"use strict";if(!t)throw new Error("FrostUI requires a Window.");if(!("DOM"in t))throw new Error("FrostUI requires FrostDOM.");const e=t.Core,i=t.DOM,s=t.dom,o=t.QuerySet,n=t.document,a={};class r{constructor(t,i){this._node=t,this._settings=e.extend({},this.constructor.defaults,a.getDataset(this._node),i),s.addEvent(this._node,this.constructor.REMOVE_EVENT,t=>{this.dispose()}),s.setData(this._node,this.constructor.DATA_KEY,this)}dispose(){s.removeEvent(this._node,this.constructor.REMOVE_EVENT),s.removeData(this._node,this.constructor.DATA_KEY),this._node=null,this._settings=null}static init(t,...e){return s.hasData(t,this.DATA_KEY)?s.getData(t,this.DATA_KEY):new this(t,...e)}}a.BaseComponent=r,a.getDataset=t=>{const e=s.getDataset(t),i={};for(const t in e)if(/ui[A-Z]/.test(t)){i[t.slice(2,3).toLowerCase()+t.slice(3)]=e[t]}return i},a.getTarget=(t,e)=>{const i=a.getTargetSelector(t);let o;if(i&&"#"!==i?o=s.findOne(i):e&&(o=s.closest(t,e).shift()),!o)throw new Error("Target not found");return o},a.getTargetSelector=t=>s.getDataset(t,"uiTarget")||s.getAttribute(t,"href"),a.initComponent=(t,i)=>{i.DATA_KEY=t,i.REMOVE_EVENT="remove.ui."+t,o.prototype[t]=function(t,...s){let o,n,a;e.isObject(t)?o=t:e.isString(t)&&(n=t);for(const[t,r]of[...this].entries()){if(!e.isElement(r))continue;let h=i.init(r,o);n&&(h=h[n](...s)),0===t&&(a=h)}return a}};class h extends r{constructor(t,e){super(t,e),s.setStyle(this._node,{margin:0,position:"absolute",top:0,right:"initial",bottom:"initial",left:0}),this._resetStyle={},this._settings.useGpu?this._resetStyle.transform="":(this._resetStyle.marginLeft=0,this._resetStyle.marginTop=0),d.add(this),this.update(!0)}dispose(){d.remove(this),this._resetStyle=null,super.dispose()}update(e=!1){if(!s.isConnected(this._node))return this;s.setStyle(this._node,this._resetStyle),this._settings.beforeUpdate&&this._settings.beforeUpdate(this._node,this._settings.reference);const i=s.rect(this._node,!0),o=s.rect(this._settings.reference,!0),a=this.constructor._scrollContainer(t,n);if(!e&&this.constructor._isNodeHidden(i,o,a,this._settings.spacing))return this;const r=this.constructor._getScrollParent(this._node),h=r?this.constructor._scrollContainer(r,r):null,d=this._settings.container?s.rect(this._settings.container,!0):null,l={...a};h&&(l.top=Math.max(l.top,h.top),l.right=Math.min(l.right,h.right),l.bottom=Math.min(l.bottom,h.bottom),l.left=Math.max(l.left,h.left)),d&&(l.top=Math.max(l.top,d.top),l.right=Math.min(l.right,d.right),l.bottom=Math.min(l.bottom,d.bottom),l.left=Math.max(l.left,d.left)),(h||d)&&(l.x=l.left,l.y=l.top,l.width=l.right-l.left,l.height=l.bottom-l.top);const g=this._settings.fixed&&"auto"!==this._settings.placement?this._settings.placement:this.constructor._getPopperPlacement(i,o,l,this._settings.placement,this._settings.spacing+2);s.setDataset(this._settings.reference,"uiPlacement",g),s.setDataset(this._node,"uiPlacement",g);const c=this._settings.position,u={x:Math.round(o.x),y:Math.round(o.y)},_=this.constructor._getRelativeParent(this._node),p=_?s.rect(_,!0):null;p&&(u.x-=Math.round(p.x),u.y-=Math.round(p.y)),this.constructor._adjustPlacement(u,i,o,g,this._settings.spacing),this.constructor._adjustPosition(u,i,o,g,c),u.x-=parseInt(s.css(this._node,"margin-left")),u.y-=parseInt(s.css(this._node,"margin-top")),this.constructor._adjustConstrain(u,i,o,l,p,g,this._settings.minContact),u.x=Math.round(u.x),u.y=Math.round(u.y),r&&(u.x+=s.getScrollX(r),u.y+=s.getScrollY(r));const m={};if(this._settings.useGpu?m.transform=`translate3d(${u.x}px , ${u.y}px , 0)`:(m.marginLeft=u.x+"px",m.marginTop=u.y+"px"),s.setStyle(this._node,m),this._settings.arrow){const t=s.rect(this._node,!0);this._updateArrow(t,o,g,c)}return this._settings.afterUpdate&&this._settings.afterUpdate(this._node,this._settings.reference,g,c),this}}class d{static add(o){this._poppers.push(o),this._running||(s.addEvent(t,"resize.ui.popper",i.debounce(t=>{for(const t of this._poppers)t.update()})),s.addEvent(n,"scroll.ui.popper",i.debounce(t=>{for(const i of this._poppers)(e.isDocument(t.target)||s.hasDescendent(t.target,i._node))&&i.update()}),!0),this._running=!0)}static remove(e){this._poppers=this._poppers.filter(t=>t!==e),this._poppers.length||(s.removeEvent(t,"resize.ui.popper scroll.ui.popper"),this._running=!1)}}Object.assign(h.prototype,{_updateArrow(t,i,o,n){const a={position:"absolute",top:"",right:"",bottom:"",left:""};s.setStyle(this._settings.arrow,a);const r=s.rect(this._settings.arrow,!0);if(["top","bottom"].includes(o)){a["top"===o?"bottom":"top"]=-Math.floor(r.height);const s=(i.width-t.width)/2;let h=t.width/2-r.width/2;"start"===n?h+=s:"end"===n&&(h-=s);let d=Math.max(i.left,t.left)-r.left,l=Math.min(i.right,t.right)-r.left-r.width;i.width<r.width&&(d-=r.width/2-i.width/2,l-=r.width/2-i.width/2),h=Math.round(h),d=Math.round(d),l=Math.round(l),a.left=e.clamp(h,d,l)}else{a["right"===o?"left":"right"]=-Math.floor(r.width);const s=(i.height-t.height)/2;let h=t.height/2-r.height;"start"===n?h+=s:"end"===n&&(h-=s);let d=Math.max(i.top,t.top)-r.top,l=Math.min(i.bottom,t.bottom)-r.top-r.height;i.height<2*r.height?(d-=r.height-i.height/2,l-=r.height-i.height/2):l-=r.height,h=Math.round(h),d=Math.round(d),l=Math.round(l),a.top=e.clamp(h,d,l)}s.setStyle(this._settings.arrow,a)}}),Object.assign(h,{_adjustConstrain(t,e,i,s,o,n,a){if(["left","right"].includes(n)){let n=t.y,r=i.top;o&&(n+=o.top,r-=o.top);const h=!1!==a?a:Math.min(i.height,e.height);if(n+e.height>s.bottom){const i=n+e.height-s.bottom;t.y=Math.max(r-e.height+h,t.y-i)}if(n<s.top){const e=n-s.top;t.y=Math.min(r+i.height-h,t.y-e)}}else{let n=t.x,r=i.left;o&&(n+=o.left,r-=o.left);const h=!1!==a?a:Math.min(i.width,e.width);if(n+e.width>s.right){const i=n+e.width-s.right;t.x=Math.max(r-e.width+h,t.x-i)}if(n<s.left){const e=n-s.left;t.x=Math.min(r+i.width-h,t.x-e)}}},_adjustPlacement(t,e,i,s,o){"top"===s?t.y-=Math.round(e.height)+o:"right"===s?t.x+=Math.round(i.width)+o:"bottom"===s?t.y+=Math.round(i.height)+o:"left"===s&&(t.x-=Math.round(e.width)+o)},_adjustPosition(t,e,i,s,o){if("start"!==o)if(["top","bottom"].includes(s)){const s=Math.round(e.width)-Math.round(i.width);"center"===o?t.x-=Math.round(s/2):"end"===o&&(t.x-=s)}else{const s=Math.round(e.height)-Math.round(i.height);"center"===o?t.y-=Math.round(s/2):"end"===o&&(t.y-=s)}},_getPopperPlacement(t,e,i,s,o){const n=e.top-i.top,a=i.right-e.right,r=i.bottom-e.bottom,h=e.left-i.left;if("top"===s){if(n<t.height+o&&r>n)return"bottom"}else if("right"===s){if(a<t.width+o&&h>a)return"left"}else if("bottom"===s){if(r<t.height+o&&n>r)return"top"}else if("left"===s){if(h<t.width+o&&a>h)return"right"}else if("auto"===s){const i=Math.max(n,r),s=Math.max(a,h),d=Math.min(n,r);if(s>i&&s>=t.width+o&&d+e.height>=t.height+o-Math.max(0,t.height-e.height))return h>a?"left":"right";const l=Math.min(a,h);if(i>=t.height+o&&l+e.width>=t.width+o-Math.max(0,t.width-e.width))return r>n?"bottom":"top";const g=Math.max(i,s);return r===g&&r>=t.height+o?"bottom":n===g&&n>=t.height+o?"top":a===g&&a>=t.width+o?"right":h===g&&h>=t.width+o?"left":"bottom"}return s},_getRelativeParent:t=>s.closest(t,t=>"relative"===s.css(t,"position"),n.body).shift(),_getScrollParent:t=>s.closest(t,t=>"relative"===s.css(t,"position")&&["overflow","overflowX","overflowY"].some(e=>["auto","scroll"].includes(s.css(t,e))),n.body).shift(),_isNodeHidden:(t,e,i,s)=>i.top>e.bottom+t.height+s||i.left>e.right+t.width+s||i.bottom<e.top-t.height-s||i.right<e.left-t.width-s,_scrollContainer(t,i){const o=e.isWindow(t),n=o?this._windowContainer(t):s.rect(t,!0),r=a.getScrollbarSize(t,i,"x"),h=a.getScrollbarSize(t,i,"y");return r&&(n.height-=r,o&&(n.bottom-=r)),h&&(n.width-=h,o&&(n.right-=h)),n},_windowContainer(t){const e=s.getScrollX(t),i=s.getScrollY(t),o=s.width(t),n=s.height(t);return{x:e,y:i,width:o,height:n,top:i,right:e+o,bottom:i+n,left:e}}}),h.defaults={reference:null,container:null,arrow:null,afterUpdate:null,beforeUpdate:null,placement:"bottom",position:"center",fixed:!1,spacing:0,minContact:null,useGpu:!0},d._poppers=[],d._popperOverflows=new Map,a.initComponent("popper",h),a.Popper=h,a.PopperSet=d;class l extends r{close(){return this._animating||!s.triggerOne(this._node,"close.ui.alert")||(this._animating=!0,s.fadeOut(this._node,{duration:this._settings.duration}).then(t=>{s.detach(this._node),s.triggerEvent(this._node,"closed.ui.alert"),s.remove(this._node)}).catch(t=>{}).finally(t=>{this._animating=!1})),this}}s.addEventDelegate(n,"click.ui.alert",'[data-ui-dismiss="alert"]',t=>{t.preventDefault();const e=a.getTarget(t.currentTarget,".alert");l.init(e).close()}),l.defaults={duration:100},a.initComponent("alert",l),a.Alert=l;class g extends r{toggle(){s.toggleClass(this._node,"active");const t=s.hasClass(this._node,"active");return s.setAttribute(this._node,"aria-pressed",t),this}}s.addEventDelegate(n,"click.ui.button",'[data-ui-toggle="button"]',t=>{t.preventDefault();g.init(t.currentTarget).toggle()}),g.defaults={},a.initComponent("button",g),a.Button=g;class c extends r{constructor(t,e){super(t,e),this._items=s.find(".carousel-item",this._node),this._index=this._items.findIndex(t=>s.hasClass(t,"active")),this._events(),"carousel"===this._settings.ride&&this._setTimer()}cycle(){return s.isHidden(n)?this._setTimer():this.slide(1),this}dispose(){this._timer&&clearTimeout(this._timer),this._settings.keyboard&&s.removeEvent(this._node,"keydown.ui.carousel"),this._settings.pause&&(s.removeEvent(this._node,"mouseenter.ui.carousel"),s.removeEvent(this._node,"mouseleave.ui.carousel")),this._items=null,super.dispose()}next(){return this.slide()}pause(){return clearTimeout(this._timer),this._timer=null,this}prev(){return this.slide(-1)}show(t){return this._show(t),this}slide(t=1){return this.show(this._index+t)}}s.addEvent(t,"load",t=>{const e=s.find('[data-ui-ride="carousel"]');for(const t of e)c.init(t)}),s.addEventDelegate(n,"click.ui.carousel","[data-ui-slide]",t=>{t.preventDefault();const e=a.getTarget(t.currentTarget,".carousel"),i=c.init(e);"prev"===s.getDataset(t.currentTarget,"uiSlide")?i.prev():i.next()}),s.addEventDelegate(n,"click.ui.carousel","[data-ui-slide-to]",t=>{t.preventDefault();const e=a.getTarget(t.currentTarget,".carousel"),i=c.init(e),o=s.getDataset(t.currentTarget,"uiSlideTo");i.show(o)}),Object.assign(c.prototype,{_events(){this._settings.keyboard&&s.addEvent(this._node,"keydown.ui.carousel",t=>{const e=t.target;if(!s.is(e,"input, select"))switch(t.code){case"ArrowLeft":t.preventDefault(),this.prev();break;case"ArrowRight":t.preventDefault(),this.next()}}),this._settings.pause&&(s.addEvent(this._node,"mouseenter.ui.carousel",t=>{this.pause()}),s.addEvent(this._node,"mouseleave.ui.carousel",t=>{this._setTimer()}))},_setTimer(){if(this._timer)return;const t=s.getDataset(this._items[this._index],"uiInterval");this._timer=setTimeout(t=>this.cycle(),t||this._settings.interval)},_show(t){if(this._sliding)return;if(t=parseInt(t),!this._settings.wrap&&(t<0||t>this._items.length-1))return;let e=0;if(t<0?e=-1:t>this._items.length-1&&(e=1),(t%=this._items.length)<0&&(t=this._items.length+t),t===this._index)return;const i=-1==e||0==e&&t<this._index?"left":"right",o={direction:i,relatedTarget:this._items[t],from:this._index,to:t};if(!s.triggerOne(this._node,"slide.ui.carousel",o))return;const n=this._index;this._index=t,this._sliding=!0,this.pause(),s.addClass(this._items[this._index],"active"),s.removeClass(this._items[n],"active"),s.animate(this._items[this._index],(t,e)=>{this._items&&this._update(t,this._items[n],e,i)},{duration:this._settings.transition}).then(t=>{const e=s.find(".active[data-ui-slide-to]",this._node),i=s.find('[data-ui-slide-to="'+this._index+'"]',this._node);s.removeClass(e,"active"),s.addClass(i,"active"),s.triggerEvent(this._node,"slid.ui.carousel",o),this._setTimer()}).finally(t=>{this._sliding=!1})},_update(t,e,i,s){if(i>=1)return e.style.setProperty("display",""),e.style.setProperty("transform",""),void t.style.setProperty("transform","");const o="right"===s;e.style.setProperty("display","block"),e.style.setProperty("transform",`translateX(${Math.round(100*i)*(o?-1:1)}%)`),t.style.setProperty("transform",`translateX(${Math.round(100*(1-i))*(o?1:-1)}%)`)}}),c.defaults={interval:5e3,transition:500,keyboard:!0,ride:!1,pause:!0,wrap:!0},a.initComponent("carousel",c),a.Carousel=c;class u extends r{constructor(t,e){super(t,e);const i=this._node.getAttribute("id");this._triggers=s.find(`[data-ui-toggle="collapse"][data-ui-target="#${i}"]`),this._settings.parent&&(this._parent=s.findOne(this._settings.parent))}dispose(){this._triggers=null,this._parent=null,super.dispose()}hide(){return!this._animating&&s.hasClass(this._node,"show")&&s.triggerOne(this._node,"hide.ui.collapse")?(this._animating=!0,s.addClass(this._triggers,"collapsed"),s.addClass(this._triggers,"collapsing"),s.squeezeOut(this._node,{direction:this._settings.direction,duration:this._settings.duration}).then(t=>{s.removeClass(this._node,"show"),s.removeClass(this._triggers,"collapsing"),s.setAttribute(this._triggers,"aria-expanded",!1),s.triggerEvent(this._node,"hidden.ui.collapse")}).catch(t=>{}).finally(t=>{this._animating=!1}),this):this}show(){if(this._animating||s.hasClass(this._node,"show"))return this;const t=[];if(this._parent){const e=s.find(".collapse.show",this._parent);for(const i of e){const e=this.constructor.init(i);if(this._parent===e._parent){if(e._animating)return;t.push(e)}}}if(!s.triggerOne(this._node,"show.ui.collapse"))return this;for(const e of t)e.hide();return this._animating=!0,s.addClass(this._node,"show"),s.removeClass(this._triggers,"collapsed"),s.addClass(this._triggers,"collapsing"),s.squeezeIn(this._node,{direction:this._settings.direction,duration:this._settings.duration}).then(t=>{s.removeClass(this._triggers,"collapsing"),s.setAttribute(this._triggers,"aria-expanded",!0),s.triggerEvent(this._node,"shown.ui.collapse")}).catch(t=>{}).finally(t=>{this._animating=!1}),this}toggle(){return s.hasClass(this._node,"show")?this.hide():this.show()}}s.addEventDelegate(n,"click.ui.collapse",'[data-ui-toggle="collapse"]',t=>{t.preventDefault();const e=a.getTargetSelector(t.currentTarget),i=s.find(e);for(const t of i){u.init(t).toggle()}}),u.defaults={direction:"bottom",duration:250},a.initComponent("collapse",u),a.Collapse=u;class _ extends r{constructor(t,e){super(t,e),this._menuNode=s.next(this._node,".dropdown-menu").shift(),this._settings.reference?"parent"===this._settings.reference?this._referenceNode=s.parent(this._node).shift():this._referenceNode=s.findOne(this._settings.reference):this._referenceNode=this._node,"static"!==this._settings.display&&s.closest(this._node,".navbar-nav").length&&(this._settings.display="static"),"dynamic"===this._settings.display&&(this._popper=new h(this._menuNode,{reference:this._referenceNode,placement:this._settings.placement,position:this._settings.position,fixed:this._settings.fixed,spacing:this._settings.spacing,minContact:this._settings.minContact}))}dispose(){this._popper&&(this._popper.dispose(),this._popper=null),this._menuNode=null,this._referenceNode=null,super.dispose()}hide(){return!this._animating&&s.hasClass(this._menuNode,"show")&&s.triggerOne(this._node,"hide.ui.dropdown")?(this._animating=!0,s.fadeOut(this._menuNode,{duration:this._settings.duration}).then(t=>{s.removeClass(this._menuNode,"show"),s.setAttribute(this._node,"aria-expanded",!1),s.triggerEvent(this._node,"hidden.ui.dropdown")}).catch(t=>{}).finally(t=>{this._animating=!1}),this):this}show(){return this._animating||s.hasClass(this._menuNode,"show")||!s.triggerOne(this._node,"show.ui.dropdown")||(this._animating=!0,s.addClass(this._menuNode,"show"),this.update(),t.requestAnimationFrame(t=>{this.update()}),s.fadeIn(this._menuNode,{duration:this._settings.duration}).then(t=>{s.setAttribute(this._node,"aria-expanded",!0),s.triggerEvent(this._node,"shown.ui.dropdown")}).catch(t=>{}).finally(t=>{this._animating=!1})),this}toggle(){return s.hasClass(this._menuNode,"show")?this.hide():this.show()}update(){return"dynamic"===this._settings.display&&this._popper.update(!0),this}}s.addEventDelegate(n,"click.ui.dropdown keyup.ui.dropdown",'[data-ui-toggle="dropdown"]',t=>{if(t.code&&"Space"!==t.code)return;t.preventDefault();_.init(t.currentTarget).toggle()}),s.addEventDelegate(n,"keydown.ui.dropdown",'[data-ui-toggle="dropdown"]',t=>{switch(t.code){case"ArrowDown":case"ArrowUp":t.preventDefault();const e=t.currentTarget,i=_.init(e);s.hasClass(i._menuNode,"show")||i.show();const o=s.findOne('.dropdown-item:not([tabindex="-1"])',i._menuNode);s.focus(o)}}),s.addEventDelegate(n,"keydown.ui.dropdown",".dropdown-menu.show .dropdown-item",t=>{let e;switch(t.code){case"ArrowDown":e=s.nextAll(t.currentTarget,'.dropdown-item:not([tabindex="-1"])').shift();break;case"ArrowUp":e=s.prevAll(t.currentTarget,'.dropdown-item:not([tabindex="-1"])').pop();break;default:return}t.preventDefault(),s.focus(e)}),s.addEvent(n,"click.ui.dropdown",t=>{const e=a.getClickTarget(t),i=s.find(".dropdown-menu.show");for(const t of i){const i=s.siblings(t,'[data-ui-toggle="dropdown"]').shift(),o=_.init(i);o._node===e||s.hasDescendent(o._menuNode,e)&&(s.is(e,"form")||s.closest(e,"form",o._menuNode).length)||o.hide()}},{capture:!0}),s.addEvent(n,"keyup.ui.dropdown",t=>{if(!["Tab","Escape"].includes(t.code))return;let e=!1;const i=s.find(".dropdown-menu.show");for(const o of i){const i=s.siblings(o,'[data-ui-toggle="dropdown"]').shift(),n=_.init(i);"Tab"===t.code&&n._node===t.target||s.hasDescendent(n._menuNode,t.target)&&("Tab"===t.code||s.is(t.target,"form")||s.closest(t.target,"form",n._menuNode).length)||(e||(e=!0,t.stopPropagation()),n.hide())}},{capture:!0}),_.defaults={display:"dynamic",duration:100,placement:"bottom",position:"start",fixed:!1,spacing:3,minContact:!1},a.initComponent("dropdown",_),a.Dropdown=_;class p extends r{constructor(t,e){super(t,e),this._dialog=s.child(this._node,".modal-dialog").shift(),this._settings.show&&this.show()}dispose(){this._dialog=null,this._activeTarget=null,this._backdrop=null,super.dispose()}hide(){if(this._animating||!s.hasClass(this._node,"show")||!s.triggerOne(this._node,"hide.ui.modal"))return this;s.stop(this._dialog),this._animating=!0;const t=s.find(".modal.show").length-1;return Promise.all([s.fadeOut(this._dialog,{duration:this._settings.duration}),s.dropOut(this._dialog,{duration:this._settings.duration,direction:"top"}),s.fadeOut(this._backdrop,{duration:this._settings.duration})]).then(e=>{s.removeAttribute(this._node,"aria-modal"),s.setAttribute(this._node,"aria-hidden",!0),a.resetScrollPadding(this._dialog),t?s.setStyle(this._node,"zIndex",""):(this._scrollPadding&&(a.resetScrollPadding(),this._scrollPadding=!1),s.removeClass(n.body,"modal-open")),s.removeClass(this._node,"show"),this._settings.backdrop&&(s.remove(this._backdrop),this._backdrop=null),this._activeTarget&&s.focus(this._activeTarget),s.triggerEvent(this._node,"hidden.ui.modal")}).catch(t=>{}).finally(t=>{this._animating=!1}),this}show(t){if(this._animating||s.hasClass(this._node,"show")||!s.triggerOne(this._node,"show.ui.modal"))return this;this._activeTarget=t,this._animating=!0;const e=s.find(".modal.show").length;if(s.removeClass(n.body,"modal-open"),a.addScrollPadding(this._dialog),e){let t=s.css(this._node,"zIndex");t=parseInt(t),t+=20*e,s.setStyle(this._node,"zIndex",t)}else s.findOne(".offcanvas.show")||(this._scrollPadding=!0,a.addScrollPadding());if(s.addClass(n.body,"modal-open"),s.addClass(this._node,"show"),this._settings.backdrop&&(this._backdrop=s.create("div",{class:"modal-backdrop"}),s.append(n.body,this._backdrop),e)){let t=s.css(this._backdrop,"zIndex");t=parseInt(t),t+=20*e,s.setStyle(this._backdrop,"zIndex",t)}return Promise.all([s.fadeIn(this._dialog,{duration:this._settings.duration}),s.dropIn(this._dialog,{duration:this._settings.duration,direction:"top"}),s.fadeIn(this._backdrop,{duration:this._settings.duration})]).then(t=>{s.removeAttribute(this._node,"aria-hidden"),s.setAttribute(this._node,"aria-modal",!0),this._settings.focus&&s.focus(this._node),s.triggerEvent(this._node,"shown.ui.modal")}).catch(t=>{}).finally(t=>{this._animating=!1}),this}toggle(){return s.hasClass(this._node,"show")?this.hide():this.show()}_transform(){this._animating||(s.stop(this._dialog),s.animate(this._dialog,(t,e)=>{if(e>=1)return void s.setStyle(t,"transform","");const i=(e<.5?e:1-e)/20;s.setStyle(t,"transform",`scale(${1+i})`)},{duration:200}).catch(t=>{}))}static _topModal(){const t=s.find(".modal.show");if(!t.length)return null;let e;for(const i of t)(!e||s.getStyle(i,"zIndex")>s.getStyle(e,"zIndex"))&&(e=i);return this.init(e)}}s.addEventDelegate(n,"click.ui.modal",'[data-ui-toggle="modal"]',t=>{t.preventDefault();const e=a.getTarget(t.currentTarget,".modal");p.init(e).show(t.currentTarget)}),s.addEventDelegate(n,"click.ui.modal",'[data-ui-dismiss="modal"]',t=>{t.preventDefault();const e=a.getTarget(t.currentTarget,".modal");p.init(e).hide()}),s.addEvent(t,"click.ui.modal",t=>{const e=a.getClickTarget(t);if(s.is(e,"[data-ui-dismiss]"))return;const i=p._topModal();!i||!i._settings.backdrop||i._node!==e&&s.hasDescendent(i._node,e)||("static"!==i._settings.backdrop?i.hide():i._transform())}),s.addEvent(t,"keyup.ui.modal",t=>{if("Escape"!==t.code)return;const e=p._topModal();e&&e._settings.keyboard&&("static"!==e._settings.backdrop?e.hide():e._transform())}),p.defaults={duration:250,backdrop:!0,focus:!0,show:!1,keyboard:!0},a.initComponent("modal",p),a.Modal=p;class m extends r{dispose(){this._activeTarget=null,super.dispose()}hide(){return!this._animating&&s.hasClass(this._node,"show")&&s.triggerOne(this._node,"hide.ui.offcanvas")?(this._animating=!0,Promise.all([s.fadeOut(this._node,{duration:this._settings.duration}),s.dropOut(this._node,{duration:this._settings.duration,direction:this._getDirection()}),s.fadeOut(this._backdrop,{duration:this._settings.duration})]).then(t=>{s.removeAttribute(this._node,"aria-modal"),s.setAttribute(this._node,"aria-hidden",!0),s.removeClass(this._node,"show"),this._settings.backdrop&&s.removeClass(n.body,"offcanvas-backdrop"),this._settings.scroll||(a.resetScrollPadding(),s.setStyle(n.body,"overflow","")),this._activeTarget&&s.focus(this._activeTarget),s.triggerEvent(this._node,"hidden.ui.offcanvas")}).catch(t=>{}).finally(t=>{this._animating=!1}),this):this}show(t){return this._animating||s.hasClass(this._node,"show")||s.findOne(".offcanvas.show")||!s.triggerOne(this._node,"show.ui.offcanvas")||(this._activeTarget=t,this._animating=!0,s.addClass(this._node,"show"),this._settings.backdrop&&s.addClass(n.body,"offcanvas-backdrop"),this._settings.scroll||(a.addScrollPadding(),s.setStyle(n.body,"overflow","hidden")),Promise.all([s.fadeIn(this._node,{duration:this._settings.duration}),s.dropIn(this._node,{duration:this._settings.duration,direction:this._getDirection()}),s.fadeIn(this._backdrop,{duration:this._settings.duration})]).then(t=>{s.removeAttribute(this._node,"aria-hidden"),s.setAttribute(this._node,"aria-modal",!0),s.triggerEvent(this._node,"shown.ui.offcanvas")}).catch(t=>{}).finally(t=>{this._animating=!1})),this}toggle(){return s.hasClass(this._node,"show")?this.hide():this.show()}}s.addEventDelegate(n,"click.ui.offcanvas",'[data-ui-toggle="offcanvas"]',t=>{t.preventDefault();const e=a.getTarget(t.currentTarget,".offcanvas");m.init(e).show(t.currentTarget)}),s.addEventDelegate(n,"click.ui.offcanvas",'[data-ui-dismiss="offcanvas"]',t=>{t.preventDefault();const e=a.getTarget(t.currentTarget,".offcanvas");m.init(e).hide()}),s.addEvent(n,"click.ui.offcanvas",t=>{const e=a.getClickTarget(t);if(s.is(e,"[data-ui-dismiss]")||s.findOne(".modal.show"))return;const i=s.find(".offcanvas.show");if(i.length)for(const t of i){const i=m.init(t);i._settings.backdrop&&i._node!==e&&!s.hasDescendent(i._node,e)&&i.hide()}}),s.addEvent(n,"keyup.ui.offcanvas",t=>{if("Escape"!==t.code||s.findOne(".modal.show"))return;const e=s.find(".offcanvas.show");if(e.length)for(const t of e){const e=m.init(t);if(!e._settings.keyboard)return;e.hide()}}),Object.assign(m.prototype,{_getDirection(){return s.hasClass(this._node,"offcanvas-end")?"right":s.hasClass(this._node,"offcanvas-bottom")?"bottom":s.hasClass(this._node,"offcanvas-start")?"left":"top"}}),m.defaults={duration:250,backdrop:!0,keyboard:!0,scroll:!1},a.initComponent("offcanvas",m),a.Offcanvas=m;class f extends r{constructor(t,e){super(t,e),this._modal=s.closest(this._node,".modal").shift(),this._triggers=this._settings.trigger.split(" "),this._render(),this._events(),this._settings.enable&&this.enable(),this.refresh()}dispose(){if(s.hasDataset(this._node,"uiOriginalTitle")){const t=s.getDataset(this._node,"uiOriginalTitle");s.setAttribute(this._node,"title",t),s.removeDataset(this._node,"uiOriginalTitle")}this._popper&&(this._popper.dispose(),this._popper=null),s.remove(this._popover),this._triggers.includes("hover")&&(s.removeEvent(this._node,"mouseover.ui.popover"),s.removeEvent(this._node,"mouseout.ui.popover")),this._triggers.includes("focus")&&(s.removeEvent(this._node,"focus.ui.popover"),s.removeEvent(this._node,"blur.ui.popover")),this._triggers.includes("click")&&s.removeEvent(this._node,"click.ui.popover"),this._modal&&s.removeEvent(this._modal,"hide.ui.modal",this._hideModalEvent),this._modal=null,this._triggers=null,this._popover=null,this._popoverHeader=null,this._popoverBody=null,this._arrow=null,super.dispose()}disable(){return this._enabled=!1,this}enable(){return this._enabled=!0,this}hide(){return this._enabled&&!this._animating&&s.isConnected(this._popover)&&s.triggerOne(this._node,"hide.ui.popover")?(this._animating=!0,s.fadeOut(this._popover,{duration:this._settings.duration}).then(t=>{this._popper.dispose(),this._popper=null,s.removeClass(this._popover,"show"),s.detach(this._popover),s.triggerEvent(this._node,"hidden.ui.popover")}).catch(t=>{}).finally(t=>{this._animating=!1}),this):this}refresh(){if(s.hasAttribute(this._node,"title")){const t=s.getAttribute(this._node,"title");s.setDataset(this._node,"uiOriginalTitle",t),s.removeAttribute(this._node,"title")}let t="";s.hasDataset(this._node,"uiTitle")?t=s.getDataset(this._node,"uiTitle"):this._settings.title?t=this._settings.title:s.hasDataset(this._node,"uiOriginalTitle")&&(t=s.getDataset(this._node,"uiOriginalTitle",t));let e="";s.hasDataset(this._node,"uiContent")?e=s.getDataset(this._node,"uiContent"):this._settings.content&&(e=this._settings.content);const i=this._settings.html?"setHTML":"setText";return s[i](this._popoverHeader,this._settings.html&&this._settings.sanitize?this._settings.sanitize(t):t),t?s.show(this._popoverHeader):s.hide(this._popoverHeader),s[i](this._popoverBody,this._settings.html&&this._settings.sanitize?this._settings.sanitize(e):e),this.update()}show(){return this._enabled?(this._animating||s.isConnected(this._popover)||!s.triggerOne(this._node,"show.ui.popover")||(this._animating=!0,s.addClass(this._popover,"show"),this.refresh(),this._show(),s.fadeIn(this._popover,{duration:this._settings.duration}).then(t=>{s.triggerEvent(this._node,"shown.ui.popover")}).catch(t=>{}).finally(t=>{this._animating=!1})),this):this}toggle(){return s.isConnected(this._popover)?this.hide():this.show()}update(){return this._popper&&this._popper.update(!0),this}}Object.assign(f.prototype,{_events(){this._triggers.includes("hover")&&(s.addEvent(this._node,"mouseover.ui.popover",t=>{this._stop(),this.show()}),s.addEvent(this._node,"mouseout.ui.popover",t=>{this._stop(),this.hide()})),this._triggers.includes("focus")&&(s.addEvent(this._node,"focus.ui.popover",t=>{this._stop(),this.show()}),s.addEvent(this._node,"blur.ui.popover",t=>{this._stop(),this.hide()})),this._triggers.includes("click")&&s.addEvent(this._node,"click.ui.popover",t=>{t.preventDefault(),this._stop(),this.toggle()}),this._modal&&s.addEvent(this._modal,"hide.ui.modal",t=>{this._stop(),this.hide()})}}),Object.assign(f.prototype,{_render(){this._popover=s.parseHTML(this._settings.template).shift(),this._settings.customClass&&s.addClass(this._popover,this._settings.customClass),this._arrow=s.find(".popover-arrow",this._popover),this._popoverHeader=s.find(".popover-header",this._popover),this._popoverBody=s.find(".popover-body",this._popover)},_show(){if(this._settings.appendTo?s.append(this._settings.appendTo,this._popover):s.after(this._node,this._popover),!this.constructor.noId){const t=a.generateId(this.constructor.DATA_KEY);s.setAttribute(this._popover,"id",t),s.setAttribute(this._node,"aria-described-by",t)}this._popper=new h(this._popover,{reference:this._node,arrow:this._arrow,placement:this._settings.placement,position:this._settings.position,fixed:this._settings.fixed,spacing:this._settings.spacing,minContact:this._settings.minContact}),t.requestAnimationFrame(t=>{this.update()})},_stop(){this._enabled&&this._animating&&(s.stop(this._popover),this._animating=!1)}}),f.defaults={template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',customClass:null,duration:100,enable:!0,html:!1,appendTo:null,sanitize:t=>s.sanitize(t),trigger:"click",placement:"auto",position:"center",fixed:!1,spacing:3,minContact:!1},a.initComponent("popover",f),a.Popover=f;class v extends r{constructor(t,e){super(t,e);const i=a.getTargetSelector(this._node);this._target=s.findOne(i),this._siblings=s.siblings(this._node)}dispose(){this._target=null,this._siblings=null,super.dispose()}hide(){return!this._animating&&s.hasClass(this._target,"active")&&s.triggerOne(this._node,"hide.ui.tab")?(this._animating=!0,s.fadeOut(this._target,{duration:this._settings.duration}).then(t=>{s.removeClass(this._target,"active"),s.removeClass(this._node,"active"),s.setAttribute(this._node,"aria-selected",!1),s.triggerEvent(this._node,"hidden.ui.tab")}).catch(t=>{}).finally(t=>{this._animating=!1}),this):this}show(){if(this._animating||s.hasClass(this._target,"active")||!s.triggerOne(this._node,"show.ui.tab"))return this;const t=this._siblings.find(t=>s.hasClass(t,"active"));let e;if(t&&(e=this.constructor.init(t),e._animating))return this;if(!s.triggerOne(this._node,"show.ui.tab"))return this;const i=t=>{this._animating=!0,s.addClass(this._target,"active"),s.addClass(this._node,"active"),s.fadeIn(this._target,{duration:this._settings.duration}).then(t=>{s.setAttribute(this._node,"aria-selected",!0),s.triggerEvent(this._node,"shown.ui.tab")}).catch(t=>{}).finally(t=>{this._animating=!1})};return e?s.triggerOne(t,"hide.ui.tab")?(s.addEventOnce(t,"hidden.ui.tab",t=>{i()}),e.hide(),this):this:(i(),this)}}s.addEventDelegate(n,"click.ui.tab",'[data-ui-toggle="tab"]',t=>{t.preventDefault();v.init(t.currentTarget).show()}),v.defaults={duration:100},a.initComponent("tab",v),a.Tab=v;class w extends r{hide(){return!this._animating&&s.isVisible(this._node)&&s.triggerOne(this._node,"hide.ui.toast")?(this._animating=!0,s.fadeOut(this._node,{duration:this._settings.duration}).then(t=>{s.setStyle(this._node,"display","none",!0),s.removeClass(this._node,"show"),s.triggerEvent(this._node,"hidden.ui.toast")}).catch(t=>{}).finally(t=>{this._animating=!1}),this):this}show(){return this._animating||s.isVisible(this._node)||!s.triggerOne(this._node,"show.ui.toast")||(this._animating=!0,s.setStyle(this._node,"display",""),s.addClass(this._node,"show"),s.fadeIn(this._node,{duration:this._settings.duration}).then(t=>{s.triggerEvent(this._node,"shown.ui.toast"),this._settings.autohide&&setTimeout(t=>this.hide(),this._settings.delay)}).catch(t=>{}).finally(t=>{this._animating=!1})),this}}s.addEventDelegate(n,"click.ui.toast",'[data-ui-dismiss="toast"]',t=>{t.preventDefault();const e=a.getTarget(t.currentTarget,".toast");w.init(e,{autohide:!1}).hide()}),w.defaults={autohide:!0,delay:5e3,duration:100},a.initComponent("toast",w),a.Toast=w;class b extends r{constructor(t,e){super(t,e),this._modal=s.closest(this._node,".modal").shift(),this._triggers=this._settings.trigger.split(" "),this._render(),this._events(),this._settings.enable&&this.enable(),this.refresh()}dispose(){if(s.hasDataset(this._node,"uiOriginalTitle")){const t=s.getDataset(this._node,"uiOriginalTitle");s.setAttribute(this._node,"title",t),s.removeDataset(this._node,"uiOriginalTitle")}this._popper&&(this._popper.dispose(),this._popper=null),s.remove(this._tooltip),this._triggers.includes("hover")&&(s.removeEvent(this._node,"mouseover.ui.tooltip"),s.removeEvent(this._node,"mouseout.ui.tooltip")),this._triggers.includes("focus")&&(s.removeEvent(this._node,"focus.ui.tooltip"),s.removeEvent(this._node,"blur.ui.tooltip")),this._triggers.includes("click")&&s.removeEvent(this._node,"click.ui.tooltip"),this._modal&&s.removeEvent(this._modal,"hide.ui.modal"),this._modal=null,this._triggers=null,this._tooltip=null,this._tooltipInner=null,this._arrow=null,super.dispose()}disable(){return this._enabled=!1,this}enable(){return this._enabled=!0,this}hide(){return this._enabled&&!this._animating&&s.isConnected(this._tooltip)&&s.triggerOne(this._node,"hide.ui.tooltip")?(this._animating=!0,s.fadeOut(this._tooltip,{duration:this._settings.duration}).then(t=>{this._popper.dispose(),this._popper=null,s.removeClass(this._tooltip,"show"),s.detach(this._tooltip),s.triggerEvent(this._node,"hidden.ui.tooltip")}).catch(t=>{}).finally(t=>{this._animating=!1}),this):this}refresh(){if(s.hasAttribute(this._node,"title")){const t=s.getAttribute(this._node,"title");s.setDataset(this._node,"uiOriginalTitle",t),s.removeAttribute(this._node,"title")}let t="";s.hasDataset(this._node,"uiTitle")?t=s.getDataset(this._node,"uiTitle"):this._settings.title?t=this._settings.title:s.hasDataset(this._node,"uiOriginalTitle")&&(t=s.getDataset(this._node,"uiOriginalTitle",t));const e=this._settings.html?"setHTML":"setText";return s[e](this._tooltipInner,this._settings.html&&this._settings.sanitize?this._settings.sanitize(t):t),this.update()}show(){return this._enabled?(this._animating||s.isConnected(this._tooltip)||!s.triggerOne(this._node,"show.ui.tooltip")||(this._animating=!0,s.addClass(this._tooltip,"show"),this.refresh(),this._show(),s.fadeIn(this._tooltip,{duration:this._settings.duration}).then(t=>{s.triggerEvent(this._node,"shown.ui.tooltip")}).catch(t=>{}).finally(t=>{this._animating=!1})),this):this}toggle(){return s.isConnected(this._tooltip)?this.hide():this.show()}update(){return this._popper&&this._popper.update(!0),this}}return Object.assign(b.prototype,{_events(){this._triggers.includes("hover")&&(s.addEvent(this._node,"mouseover.ui.tooltip",t=>{this._stop(),this.show()}),s.addEvent(this._node,"mouseout.ui.tooltip",t=>{this._stop(),this.hide()})),this._triggers.includes("focus")&&(s.addEvent(this._node,"focus.ui.tooltip",t=>{this._stop(),this.show()}),s.addEvent(this._node,"blur.ui.tooltip",t=>{this._stop(),this.hide()})),this._triggers.includes("click")&&s.addEvent(this._node,"click.ui.tooltip",t=>{t.preventDefault(),this._stop(),this.toggle()}),this._modal&&s.addEvent(this._modal,"hide.ui.modal",t=>{this._stop(),this.hide()})}}),Object.assign(b.prototype,{_render(){this._tooltip=s.parseHTML(this._settings.template).shift(),this._settings.customClass&&s.addClass(this._tooltip,this._settings.customClass),this._arrow=s.find(".tooltip-arrow",this._tooltip),this._tooltipInner=s.find(".tooltip-inner",this._tooltip)},_show(){if(this._settings.appendTo?s.append(this._settings.appendTo,this._tooltip):s.after(this._node,this._tooltip),!this.constructor.noId){const t=a.generateId(this.constructor.DATA_KEY);s.setAttribute(this._tooltip,"id",t),s.setAttribute(this._node,"aria-described-by",t)}this._popper=new h(this._tooltip,{reference:this._node,arrow:this._arrow,placement:this._settings.placement,position:this._settings.position,fixed:this._settings.fixed,spacing:this._settings.spacing,minContact:this._settings.minContact}),t.requestAnimationFrame(t=>{this.update()})},_stop(){this._enabled&&this._animating&&(s.stop(this._tooltip),this._animating=!1)}}),b.defaults={template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',customClass:null,duration:100,enable:!0,html:!1,trigger:"hover focus",appendTo:null,sanitize:t=>s.sanitize(t),placement:"auto",position:"center",fixed:!1,spacing:2,minContact:!1},a.initComponent("tooltip",b),a.Tooltip=b,s.addEvent(t,"mousedown.ui",t=>{a._clickTarget=t.target},{capture:!0}),s.addEvent(t,"mouseup.ui",t=>{setTimeout(t=>{a._clickTarget=null},0)},{capture:!0}),a.addScrollPadding=(e=n.body)=>{const i=a.getScrollbarSize(t,n,"y"),o=a.getScrollbarSize(t,n,"x");if(i){const t=s.getStyle(e,"paddingRight"),o=s.css(e,"paddingRight");s.setDataset(e,"uiPaddingRight",t),s.setStyle(e,"paddingRight",i+parseInt(o)+"px")}if(o){const t=s.getStyle(e,"paddingBottom"),i=s.css(e,"paddingBottom");s.setDataset(e,"uiPaddingBottom",t),s.setStyle(e,"paddingBottom",o+parseInt(i)+"px")}},a.generateId=t=>{const i=`${t}${e.randomInt(1e4,99999)}`;return s.findOne("#"+i)?a.generateId(t):i},a.getClickTarget=t=>a._clickTarget||t.target,a.getScrollbarSize=(e=t,o=n,r)=>{const h="x"===r?"width":"height",d=s[h](e);return s[h](o,i.SCROLL_BOX)>d?a._calculateScrollbarSize():0},a.resetScrollPadding=(t=n.body)=>{const e=s.getDataset(t,"uiPaddingRight"),i=s.getDataset(t,"uiPaddingBottom");s.setStyle(t,{paddingRight:e,paddingBottom:i}),s.removeDataset(t,"uiPaddingRight"),s.removeDataset(t,"uiPaddingBottom")},a._calculateScrollbarSize=t=>{if(a._scrollbarSize)return a._scrollbarSize;const e=s.create("div",{style:{width:"100px",height:"100px",overflow:"scroll",position:"absolute",top:"-9999px"}});return s.append(n.body,e),a._scrollbarSize=s.getProperty(e,"offsetWidth")-s.width(e),s.detach(e),a._scrollbarSize},s.addEventDelegate(n,"click",'[data-ui-toggle="clipboard"]',t=>{t.preventDefault();const i=t.currentTarget,o=e.extend({action:"copy",text:!1},a.getDataset(i));if(!["copy","cut"].includes(o.action))throw new Error("Invalid clipboard action");let r,h;if(o.text)r=o.text;else{const t=a.getTarget(i);s.is(t,"input, textarea")?h=t:r=s.getText(t)}const d=!h;d&&(h=s.create("textarea",{class:"visually-hidden position-fixed",value:r}),s.append(n.body,h)),s.select(h),s.exec(o.action)&&s.triggerEvent(i,"copied.ui.clipboard",{detail:{action:o.action,text:s.getValue(h)}}),d&&s.remove(h)}),s.addEventDelegate(n,"mousedown.ui.ripple",".ripple",t=>{const e=t.currentTarget,i=s.position(e,!0),o=s.width(e),n=s.height(e),a=3*Math.max(o,n),r=s.isFixed(e),h=r?t.clientX:t.pageX,d=r?t.clientY:t.pageY,l=s.create("span",{class:"ripple-effect",style:{left:h-i.x,top:d-i.y}});s.append(e,l),s.animate(l,(t,e)=>{s.setStyle(t,{transform:"scale("+Math.floor(e*a)+")",opacity:1-Math.pow(e,2)})},{duration:1e3}).finally(t=>{s.remove(l)})}),s.addEventDelegate(n,"change.ui.expand input.ui.expand",".text-expand",t=>{const e=t.currentTarget;s.setStyle(e,"height","inherit");const o=s.css(e,"borderTop"),n=s.css(e,"borderBottom"),a=s.height(e,i.SCROLL_BOX)+parseInt(o)+parseInt(n);s.setStyle(e,"height",a)}),{UI:a}}));