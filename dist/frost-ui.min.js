!function(t,e){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e:Object.assign(t,e(t))}(window,(function(t){"use strict";if(!t)throw new Error("FrostUI requires a Window.");if(!("DOM"in t))throw new Error("FrostUI requires FrostDOM.");const e=t.Core,i=t.DOM,s=t.dom,n=t.QuerySet,o=t.document,r={};class a{constructor(t,i){this._node=t,this._settings=e.extend({},this.constructor.defaults,r.getDataset(this._node),i),s.addEvent(this._node,this.constructor.REMOVE_EVENT,t=>{this.dispose()}),s.setData(this._node,this.constructor.DATA_KEY,this)}dispose(){s.removeEvent(this._node,this.constructor.REMOVE_EVENT),s.removeData(this._node,this.constructor.DATA_KEY),this._node=null,this._settings=null}static init(t,...e){return s.hasData(t,this.DATA_KEY)?s.getData(t,this.DATA_KEY):new this(t,...e)}}r.BaseComponent=a,r.getDataset=t=>{const e=s.getDataset(t),i={};for(const t in e)if(/ui[A-Z]/.test(t)){i[t.slice(2,3).toLowerCase()+t.slice(3)]=e[t]}return i},r.getTarget=(t,e)=>{const i=r.getTargetSelector(t);let n;if(i&&"#"!==i?n=s.findOne(i):e&&(n=s.closest(t,e).shift()),!n)throw new Error("Target not found");return n},r.getTargetSelector=t=>s.getDataset(t,"uiTarget")||s.getAttribute(t,"href"),r.initComponent=(t,i)=>{i.DATA_KEY=t,i.REMOVE_EVENT="remove.ui."+t,n.prototype[t]=function(t,...s){let n,o,r;e.isObject(t)?n=t:e.isString(t)&&(o=t);for(const[t,a]of[...this].entries()){if(!e.isElement(a))continue;let h=i.init(a,n);o&&(h=h[o](...s)),0===t&&(r=h)}return r}};class h extends a{constructor(t,e){super(t,e),s.setStyle(this._node,{margin:0,position:"absolute",top:0,right:"initial",bottom:"initial",left:0}),this._resetStyle={},this._settings.useGpu?this._resetStyle.transform="":(this._resetStyle.marginLeft=0,this._resetStyle.marginTop=0),d.add(this),this.update(!0)}dispose(){d.remove(this),this._resetStyle=null,super.dispose()}update(t=!1){if(!s.isConnected(this._node))return this;s.setStyle(this._node,this._resetStyle),this._settings.beforeUpdate&&this._settings.beforeUpdate(this._node,this._settings.reference);const e=s.rect(this._node,!0),i=s.rect(this._settings.reference,!0),n=this.constructor._windowContainer();if(!t&&this.constructor._isNodeHidden(e,i,n,this._settings.spacing))return this;const o=this.constructor._getScrollParent(this._node),r=o?s.rect(o,!0):null,a=this._settings.container?s.rect(this._settings.container,!0):null,h={...n};r&&(h.top=Math.max(h.top,r.top),h.right=Math.min(h.right,r.right),h.bottom=Math.min(h.bottom,r.bottom),h.left=Math.max(h.left,r.left)),a&&(h.top=Math.max(h.top,a.top),h.right=Math.min(h.right,a.right),h.bottom=Math.min(h.bottom,a.bottom),h.left=Math.max(h.left,a.left)),(r||a)&&(h.x=h.left,h.y=h.top,h.width=h.right-h.left,h.height=h.bottom-h.top);const d=this._settings.fixed?this._settings.placement:this.constructor._getPopperPlacement(e,i,h,this._settings.placement,this._settings.spacing+2);s.setDataset(this._settings.reference,"uiPlacement",d),s.setDataset(this._node,"uiPlacement",d);const l="auto"!==this._settings.position?this._settings.position:this.constructor._getPopperPosition(e,i,h,d,this._settings.position),u={x:Math.round(i.x),y:Math.round(i.y)},p=this.constructor._getRelativeParent(this._node),_=p?s.rect(p,!0):null;_&&(u.x-=Math.round(_.x),u.y-=Math.round(_.y)),this.constructor._adjustPlacement(u,e,i,d,this._settings.spacing),this.constructor._adjustPosition(u,e,i,d,l),u.x-=parseInt(s.css(this._node,"margin-left")),u.y-=parseInt(s.css(this._node,"margin-top")),this.constructor._adjustConstrain(u,e,i,h,_,d,this._settings.minContact),u.x=Math.round(u.x),u.y=Math.round(u.y),o&&(u.x+=s.getScrollX(o),u.y+=s.getScrollY(o));const c={};if(this._settings.useGpu?c.transform=`translate3d(${u.x}px , ${u.y}px , 0)`:(c.marginLeft=u.x+"px",c.marginTop=u.y+"px"),s.setStyle(this._node,c),this._settings.arrow){const t=s.rect(this._node,!0);this._updateArrow(t,i,d,l)}return this._settings.afterUpdate&&this._settings.afterUpdate(this._node,this._settings.reference,d,l),this}}class d{static add(n){this._poppers.push(n),this._running||(s.addEvent(t,"resize.ui.popper",i.debounce(t=>{for(const t of this._poppers)t.update()})),s.addEvent(o,"scroll.ui.popper",i.debounce(t=>{for(const i of this._poppers)(e.isDocument(t.target)||s.hasDescendent(t.target,i._node))&&i.update()}),!0),this._running=!0)}static remove(e){this._poppers=this._poppers.filter(t=>t!==e),this._poppers.length||(s.removeEvent(t,"resize.ui.popper scroll.ui.popper"),this._running=!1)}}Object.assign(h.prototype,{_updateArrow(t,i,n,o){const r={position:"absolute",top:"",right:"",bottom:"",left:""};s.setStyle(this._settings.arrow,r);const a=s.rect(this._settings.arrow,!0);if(["top","bottom"].includes(n)){r["top"===n?"bottom":"top"]=-Math.floor(a.height);const s=(i.width-t.width)/2;let h=t.width/2-a.width/2;"start"===o?h+=s:"end"===o&&(h-=s);let d=Math.max(i.left,t.left)-a.left,l=Math.min(i.right,t.right)-a.left-a.width;i.width<a.width&&(d-=a.width/2-i.width/2,l-=a.width/2-i.width/2),h=Math.round(h),d=Math.round(d),l=Math.round(l),r.left=e.clamp(h,d,l)}else{r["right"===n?"left":"right"]=-Math.floor(a.width);const s=(i.height-t.height)/2;let h=t.height/2-a.height;"start"===o?h+=s:"end"===o&&(h-=s);let d=Math.max(i.top,t.top)-a.top,l=Math.min(i.bottom,t.bottom)-a.top-a.height;i.height<2*a.height?(d-=a.height-i.height/2,l-=a.height-i.height/2):l-=a.height,h=Math.round(h),d=Math.round(d),l=Math.round(l),r.top=e.clamp(h,d,l)}s.setStyle(this._settings.arrow,r)}}),Object.assign(h,{_adjustConstrain(t,e,i,s,n,o,r){if(["left","right"].includes(o)){let o=t.y,a=i.top;n&&(o+=n.top,a-=n.top);const h=!1!==r?r:Math.min(i.height,e.height);if(o+e.height>s.bottom){const i=o+e.height-s.bottom;t.y=Math.max(a-e.height+h,t.y-i)}else if(o<s.top){const e=o-s.top;t.y=Math.min(a+i.height-h,t.y-e)}}else{let o=t.x,a=i.left;n&&(o+=n.left,a-=n.left);const h=!1!==r?r:Math.min(i.width,e.width);if(o+e.width>s.right){const i=o+e.width-s.right;t.x=Math.max(a-e.width+h,t.x-i)}else if(o<s.left){const e=o-s.left;t.x=Math.min(a+i.width-h,t.x-e)}}},_adjustPlacement(t,e,i,s,n){"top"===s?t.y-=Math.round(e.height)+n:"right"===s?t.x+=Math.round(i.width)+n:"bottom"===s?t.y+=Math.round(i.height)+n:"left"===s&&(t.x-=Math.round(e.width)+n)},_adjustPosition(t,e,i,s,n){if("start"!==n)if(["top","bottom"].includes(s)){const s=Math.round(e.width)-Math.round(i.width);"center"===n?t.x-=Math.round(s/2):"end"===n&&(t.x-=s)}else{const s=Math.round(e.height)-Math.round(i.height);"center"===n?t.y-=Math.round(s/2):"end"===n&&(t.y-=s)}},_getPopperPlacement(t,e,i,s,n){const o=e.top-i.top,r=i.right-e.right,a=i.bottom-e.bottom,h=e.left-i.left;if("top"===s){if(o<t.height+n&&a>o)return"bottom"}else if("right"===s){if(r<t.width+n&&h>r)return"left"}else if("bottom"===s){if(a<t.height+n&&o>a)return"top"}else if("left"===s){if(h<t.width+n&&r>h)return"right"}else if("auto"===s){const i=Math.max(o,a),s=Math.max(r,h),d=Math.min(o,a);if(s>i&&s>=t.width+n&&d+e.height>=t.height+n-Math.max(0,t.height-e.height))return h>r?"left":"right";const l=Math.min(r,h);if(i>=t.height+n&&l+e.width>=t.width+n-Math.max(0,t.width-e.width))return a>o?"bottom":"top";const u=Math.max(i,s);return a===u&&a>=t.height+n?"bottom":o===u&&o>=t.height+n?"top":r===u&&r>=t.width+n?"right":h===u&&h>=t.width+n?"left":"bottom"}return s},_getPopperPosition(t,e,i,s,n){const o=t.width-e.width,r=t.height-e.height;if(["bottom","top"].includes(s)){const t=e.left-i.left,s=i.right-e.right;if("start"===n){if(s<o){if(t>=o/2&&s>=o/2)return"center";if(t>=o)return"end"}}else if("center"===n){if(t<o/2||s<o/2){if(s>=o)return"start";if(t>=o)return"end"}}else if("end"===n&&t<o){if(t>=o/2&&s>=o/2)return"center";if(s>=o)return"start"}}else{const t=e.top-i.top,s=i.bottom-e.bottom;if("start"===n){if(s<r){if(s>=r/2&&t>=r/2)return"center";if(t>=r)return"end"}}else if("center"===n){if(t<r/2||s<r/2){if(s>=r)return"start";if(t>=r)return"end"}}else if("end"===n&&t<r){if(t>=r/2&&s>=r/2)return"center";if(s>=r)return"start"}}return n},_getRelativeParent:t=>s.closest(t,t=>"relative"===s.css(t,"position"),o.body).shift(),_getScrollbarSize(){if(this._scrollbarSize)return this._scrollbarSize;const t=s.create("div",{style:{width:"100px",height:"100px",overflow:"scroll",position:"absolute",top:"-9999px"}});return s.append(o.body,t),this._scrollbarSize=s.getProperty(t,"offsetWidth")-s.width(t),s.detach(t),this._scrollbarSize},_getScrollParent:t=>s.closest(t,t=>!!["overflow","overflowX","overflowY"].find(e=>!!["auto","scroll"].find(i=>new RegExp(i).test(s.css(t,e)))),o.body).shift(),_isNodeHidden:(t,e,i,s)=>i.top>e.bottom+t.height+s||i.left>e.right+t.width+s||i.bottom<e.top-t.height-s||i.right<e.left-t.width-s,_windowContainer(){const e=s.getScrollX(t),n=s.getScrollY(t),r=s.width(t),a=s.height(t),h=s.width(o,i.SCROLL_BOX),d=s.height(o,i.SCROLL_BOX);let l=r,u=a;return h>r&&(u-=this._getScrollbarSize()),d>a&&(l-=this._getScrollbarSize()),{x:e,y:n,width:l,height:u,top:n,right:e+l,bottom:n+u,left:e}}}),h.defaults={reference:null,container:null,arrow:null,afterUpdate:null,beforeUpdate:null,placement:"bottom",position:"center",fixed:!1,spacing:0,minContact:null,useGpu:!0},d._poppers=[],d._popperOverflows=new Map,r.initComponent("popper",h),r.Popper=h,r.PopperSet=d;class l extends a{close(){return this._animating||!s.triggerOne(this._node,"close.ui.alert")||(this._animating=!0,s.fadeOut(this._node,{duration:this._settings.duration}).then(t=>{s.detach(this._node),s.triggerEvent(this._node,"closed.ui.alert"),s.remove(this._node)}).catch(t=>{}).finally(t=>{this._animating=!1})),this}}s.addEventDelegate(o,"click.ui.alert",'[data-ui-dismiss="alert"]',t=>{t.preventDefault();const e=r.getTarget(t.currentTarget,".alert");l.init(e).close()}),l.defaults={duration:100},r.initComponent("alert",l),r.Alert=l;class u extends a{toggle(){s.toggleClass(this._node,"active");const t=s.hasClass(this._node,"active");return s.setAttribute(this._node,"aria-pressed",t),this}}s.addEventDelegate(o,"click.ui.button",'[data-ui-toggle="button"]',t=>{t.preventDefault();u.init(t.currentTarget).toggle()}),u.defaults={},r.initComponent("button",u),r.Button=u;class p extends a{constructor(t,e){super(t,e),this._items=s.find(".carousel-item",this._node),this._index=this._items.findIndex(t=>s.hasClass(t,"active")),this._events(),"carousel"===this._settings.ride&&this._setTimer()}cycle(){return s.isHidden(o)?this._setTimer():this.slide(1),this}dispose(){this._timer&&clearTimeout(this._timer),this._settings.keyboard&&s.removeEvent(this._node,"keydown.ui.carousel"),this._settings.pause&&(s.removeEvent(this._node,"mouseenter.ui.carousel"),s.removeEvent(this._node,"mouseleave.ui.carousel")),this._items=null,super.dispose()}next(){return this.slide()}pause(){return clearTimeout(this._timer),this._timer=null,this}prev(){return this.slide(-1)}show(t){return this._show(t),this}slide(t=1){return this.show(this._index+t)}}s.addEvent(t,"load",t=>{const e=s.find('[data-ui-ride="carousel"]');for(const t of e)p.init(t)}),s.addEventDelegate(o,"click.ui.carousel","[data-ui-slide]",t=>{t.preventDefault();const e=r.getTarget(t.currentTarget,".carousel"),i=p.init(e);"prev"===s.getDataset(t.currentTarget,"uiSlide")?i.prev():i.next()}),s.addEventDelegate(o,"click.ui.carousel","[data-ui-slide-to]",t=>{t.preventDefault();const e=r.getTarget(t.currentTarget,".carousel"),i=p.init(e),n=s.getDataset(t.currentTarget,"uiSlideTo");i.show(n)}),Object.assign(p.prototype,{_events(){this._settings.keyboard&&s.addEvent(this._node,"keydown.ui.carousel",t=>{const e=t.target;if(!s.is(e,"input, select"))switch(t.code){case"ArrowLeft":t.preventDefault(),this.prev();break;case"ArrowRight":t.preventDefault(),this.next()}}),this._settings.pause&&(s.addEvent(this._node,"mouseenter.ui.carousel",t=>{this.pause()}),s.addEvent(this._node,"mouseleave.ui.carousel",t=>{this._setTimer()}))},_setTimer(){if(this._timer)return;const t=s.getDataset(this._items[this._index],"uiInterval");this._timer=setTimeout(t=>this.cycle(),t||this._settings.interval)},_show(t){if(this._sliding)return;if(t=parseInt(t),!this._settings.wrap&&(t<0||t>this._items.length-1))return;let e=0;if(t<0?e=-1:t>this._items.length-1&&(e=1),(t%=this._items.length)<0&&(t=this._items.length+t),t===this._index)return;const i=-1==e||0==e&&t<this._index?"left":"right",n={direction:i,relatedTarget:this._items[t],from:this._index,to:t};if(!s.triggerOne(this._node,"slide.ui.carousel",n))return;const o=this._index;this._index=t,this._sliding=!0,this.pause(),s.addClass(this._items[this._index],"active"),s.removeClass(this._items[o],"active"),s.animate(this._items[this._index],(t,e)=>this._update(t,this._items[o],e,i),{duration:this._settings.transition}).then(t=>{const e=s.find(".active[data-ui-slide-to]",this._node),i=s.find('[data-ui-slide-to="'+this._index+'"]',this._node);s.removeClass(e,"active"),s.addClass(i,"active"),s.triggerEvent(this._node,"slid.ui.carousel",n),this._setTimer()}).finally(t=>{this._sliding=!1})},_update(t,e,i,s){if(i>=1)return e.style.setProperty("display",""),e.style.setProperty("transform",""),void t.style.setProperty("transform","");const n="right"===s;e.style.setProperty("display","block"),e.style.setProperty("transform",`translateX(${Math.round(100*i)*(n?-1:1)}%)`),t.style.setProperty("transform",`translateX(${Math.round(100*(1-i))*(n?1:-1)}%)`)}}),p.defaults={interval:5e3,transition:500,keyboard:!0,ride:!1,pause:!0,wrap:!0},r.initComponent("carousel",p),r.Carousel=p;class _ extends a{constructor(t,e){super(t,e);const i=this._node.getAttribute("id");this._triggers=s.find(`[data-ui-toggle="collapse"][data-ui-target="#${i}"]`),this._settings.parent&&(this._parent=s.findOne(this._settings.parent))}dispose(){this._triggers=null,this._parent=null,super.dispose()}hide(){return!this._animating&&s.hasClass(this._node,"show")&&s.triggerOne(this._node,"hide.ui.collapse")?(this._animating=!0,s.addClass(this._triggers,"collapsed"),s.squeezeOut(this._node,{direction:this._settings.direction,duration:this._settings.duration}).then(t=>{s.removeClass(this._node,"show"),s.setAttribute(this._triggers,"aria-expanded",!1),s.triggerEvent(this._node,"hidden.ui.collapse")}).catch(t=>{}).finally(t=>{this._animating=!1}),this):this}show(){if(this._animating||s.hasClass(this._node,"show"))return this;const t=[];if(this._parent){const e=s.find(".collapse.show",this._parent);for(const i of e){const e=this.constructor.init(i);if(this._parent===e._parent){if(e._animating)return;t.push(e)}}}if(!s.triggerOne(this._node,"show.ui.collapse"))return this;for(const e of t)e.hide();return this._animating=!0,s.addClass(this._node,"show"),s.removeClass(this._triggers,"collapsed"),s.squeezeIn(this._node,{direction:this._settings.direction,duration:this._settings.duration}).then(t=>{s.setAttribute(this._triggers,"aria-expanded",!0),s.triggerEvent(this._node,"shown.ui.collapse")}).catch(t=>{}).finally(t=>{this._animating=!1}),this}toggle(){return s.hasClass(this._node,"show")?this.hide():this.show()}}s.addEventDelegate(o,"click.ui.collapse",'[data-ui-toggle="collapse"]',t=>{t.preventDefault();const e=r.getTargetSelector(t.currentTarget),i=s.find(e);for(const t of i){_.init(t).toggle()}}),_.defaults={direction:"bottom",duration:250},r.initComponent("collapse",_),r.Collapse=_;class c extends a{constructor(t,e){super(t,e),this._menuNode=s.next(this._node,".dropdown-menu").shift(),this._settings.reference?"parent"===this._settings.reference?this._referenceNode=s.parent(this._node).shift():this._referenceNode=s.findOne(this._settings.reference):this._referenceNode=this._node,"static"!==this._settings.display&&s.closest(this._node,".navbar-nav").length&&(this._settings.display="static"),"dynamic"===this._settings.display&&(this._popper=new h(this._menuNode,{reference:this._referenceNode,placement:this._settings.placement,position:this._settings.position,fixed:this._settings.fixed,spacing:this._settings.spacing,minContact:this._settings.minContact}))}dispose(){this._popper&&(this._popper.dispose(),this._popper=null),this._menuNode=null,this._referenceNode=null,super.dispose()}hide(){return!this._animating&&s.hasClass(this._menuNode,"show")&&s.triggerOne(this._node,"hide.ui.dropdown")?(this._animating=!0,s.fadeOut(this._menuNode,{duration:this._settings.duration}).then(t=>{s.removeClass(this._menuNode,"show"),s.setAttribute(this._node,"aria-expanded",!1),s.triggerEvent(this._node,"hidden.ui.dropdown")}).catch(t=>{}).finally(t=>{this._animating=!1}),this):this}show(){return this._animating||s.hasClass(this._menuNode,"show")||!s.triggerOne(this._node,"show.ui.dropdown")||(this._animating=!0,s.addClass(this._menuNode,"show"),this.update(),t.requestAnimationFrame(t=>{this.update()}),s.fadeIn(this._menuNode,{duration:this._settings.duration}).then(t=>{s.setAttribute(this._node,"aria-expanded",!0),s.triggerEvent(this._node,"shown.ui.dropdown")}).catch(t=>{}).finally(t=>{this._animating=!1})),this}toggle(){return s.hasClass(this._menuNode,"show")?this.hide():this.show()}update(){return"dynamic"===this._settings.display&&this._popper.update(!0),this}static autoHide(t,e=!1){e||(e=s.is(t,"form"));const i=s.find(".dropdown-menu.show");for(const n of i){if(t&&s.hasDescendent(n,t)&&(e||s.closest(t,"form",n).length))continue;const i=s.prev(n).shift();if(s.isSame(t,i))continue;this.init(i).hide()}}}s.addEventDelegate(o,"click.ui.dropdown keyup.ui.dropdown",'[data-ui-toggle="dropdown"]',t=>{if(t.code&&"Space"!==t.code)return;t.preventDefault();c.init(t.currentTarget).toggle()}),s.addEventDelegate(o,"keydown.ui.dropdown",'[data-ui-toggle="dropdown"]',t=>{switch(t.code){case"ArrowDown":case"ArrowUp":t.preventDefault();const e=t.currentTarget,i=c.init(e);s.hasClass(i._menuNode,"show")||i.show();const n=s.findOne('.dropdown-item:not([tabindex="-1"])',i._menuNode);s.focus(n)}}),s.addEventDelegate(o,"keydown.ui.dropdown",".dropdown-menu.show .dropdown-item",t=>{let e;switch(t.code){case"ArrowDown":e=s.nextAll(t.currentTarget,'.dropdown-item:not([tabindex="-1"])').shift();break;case"ArrowUp":e=s.prevAll(t.currentTarget,'.dropdown-item:not([tabindex="-1"])').pop();break;default:return}t.preventDefault(),s.focus(e)}),s.addEvent(o,"click.ui.dropdown",t=>{c.autoHide(t.target)}),s.addEvent(o,"keyup.ui.dropdown",t=>{switch(t.code){case"Tab":c.autoHide(t.target,!0);break;case"Escape":c.autoHide()}}),c.defaults={display:"dynamic",duration:100,placement:"bottom",position:"start",fixed:!1,spacing:3,minContact:!1},r.initComponent("dropdown",c),r.Dropdown=c;class g extends a{constructor(t,e){super(t,e),this._dialog=s.child(this._node,".modal-dialog").shift(),s.hasClass(this._node,"modal-left")?this._direction="left":s.hasClass(this._node,"modal-right")?this._direction="right":this._direction="top",this._settings.show&&this.show()}dispose(){this._dialog=null,this._activeTarget=null,this._backdrop=null,super.dispose()}hide(){return!this._animating&&s.hasClass(this._node,"show")&&s.triggerOne(this._node,"hide.ui.modal")?(this._animating=!0,this.constructor.stack.delete(this),Promise.all([s.fadeOut(this._dialog,{duration:this._settings.duration}),s.dropOut(this._dialog,{duration:this._settings.duration,direction:this._direction}),s.fadeOut(this._backdrop,{duration:this._settings.duration})]).then(t=>{s.removeAttribute(this._node,"aria-modal"),s.setAttribute(this._node,"aria-hidden",!0),s.removeClass(this._node,"show"),s.removeClass(o.body,"modal-open"),s.setStyle(this._node,"zIndex",""),this._settings.backdrop&&(s.remove(this._backdrop),this._backdrop=null),this._activeTarget&&s.focus(this._activeTarget),s.triggerEvent(this._node,"hidden.ui.modal")}).catch(t=>{}).finally(t=>{this._animating=!1}),this):this}show(t){if(this._animating||s.hasClass(this._node,"show")||!s.triggerOne(this._node,"show.ui.modal"))return this;this._activeTarget=t,this._animating=!0;const e=this.constructor.stack.size;if(e){const t=s.css(this._node,"zIndex");s.setStyle(this._node,"zIndex",parseInt(t)+20*e)}if(s.addClass(this._node,"show"),s.addClass(o.body,"modal-open"),this.constructor.stack.add(this),this._settings.backdrop&&(this._backdrop=s.create("div",{class:"modal-backdrop"}),s.append(o.body,this._backdrop),e)){const t=s.css(this._backdrop,"zIndex");s.setStyle(this._backdrop,"zIndex",parseInt(t)+20*e)}return Promise.all([s.fadeIn(this._dialog,{duration:this._settings.duration}),s.dropIn(this._dialog,{duration:this._settings.duration,direction:this._direction}),s.fadeIn(this._backdrop,{duration:this._settings.duration})]).then(t=>{s.removeAttribute(this._node,"aria-hidden"),s.setAttribute(this._node,"aria-modal",!0),this._settings.focus&&s.focus(this._node),s.triggerEvent(this._node,"shown.ui.modal")}).catch(t=>{}).finally(t=>{this._animating=!1}),this}toggle(){return s.hasClass(this._node,"show")?this.hide():this.show()}}s.addEventDelegate(o,"click.ui.modal",'[data-ui-toggle="modal"]',t=>{t.preventDefault();const e=r.getTarget(t.currentTarget,".modal");g.init(e).show(t.currentTarget)}),s.addEventDelegate(o,"click.ui.modal",'[data-ui-dismiss="modal"]',t=>{t.preventDefault();const e=r.getTarget(t.currentTarget,".modal");g.init(e).hide()}),s.addEvent(o,"click.ui.modal",t=>{if(s.is(t.target,'[data-ui-dismiss="modal"]'))return;if(!g.stack.size)return;let e;for(e of g.stack);"static"!==e._settings.backdrop&&e._settings.backdrop&&(e._node!==t.target&&s.hasDescendent(e._node,t.target)||e.hide())}),s.addEvent(o,"keyup.ui.modal",t=>{if("Escape"!==t.code)return;if(!g.stack.size)return;let e;for(e of g.stack);e._settings.keyboard&&e.hide()}),g.defaults={duration:250,backdrop:!0,focus:!0,show:!1,keyboard:!0},g.stack=new Set,r.initComponent("modal",g),r.Modal=g;class m extends a{constructor(t,e){super(t,e),this._modal=s.closest(this._node,".modal").shift(),this._triggers=this._settings.trigger.split(" "),this._render(),this._events(),this._settings.enable&&this.enable(),this.refresh()}dispose(){if(s.hasDataset(this._node,"uiOriginalTitle")){const t=s.getDataset(this._node,"uiOriginalTitle");s.setAttribute(this._node,"title",t),s.removeDataset(this._node,"uiOriginalTitle")}this._popper&&(this._popper.dispose(),this._popper=null),s.remove(this._popover),this._triggers.includes("hover")&&(s.removeEvent(this._node,"mouseover.ui.popover"),s.removeEvent(this._node,"mouseout.ui.popover")),this._triggers.includes("focus")&&(s.removeEvent(this._node,"focus.ui.popover"),s.removeEvent(this._node,"blur.ui.popover")),this._triggers.includes("click")&&s.removeEvent(this._node,"click.ui.popover"),this._modal&&s.removeEvent(this._modal,"hide.ui.modal",this._hideModalEvent),this._modal=null,this._triggers=null,this._popover=null,this._popoverHeader=null,this._popoverBody=null,this._arrow=null,super.dispose()}disable(){return this._enabled=!1,this}enable(){return this._enabled=!0,this}hide(){return this._enabled&&!this._animating&&s.isConnected(this._popover)&&s.triggerOne(this._node,"hide.ui.popover")?(this._animating=!0,s.fadeOut(this._popover,{duration:this._settings.duration}).then(t=>{this._popper.dispose(),this._popper=null,s.removeClass(this._popover,"show"),s.detach(this._popover),s.triggerEvent(this._node,"hidden.ui.popover")}).catch(t=>{}).finally(t=>{this._animating=!1}),this):this}refresh(){if(s.hasAttribute(this._node,"title")){const t=s.getAttribute(this._node,"title");s.setDataset(this._node,"uiOriginalTitle",t),s.removeAttribute(this._node,"title")}let t="";s.hasDataset(this._node,"uiTitle")?t=s.getDataset(this._node,"uiTitle"):this._settings.title?t=this._settings.title:s.hasDataset(this._node,"uiOriginalTitle")&&(t=s.getDataset(this._node,"uiOriginalTitle",t));let e="";s.hasDataset(this._node,"uiContent")?e=s.getDataset(this._node,"uiContent"):this._settings.content&&(e=this._settings.content);const i=this._settings.html?"setHTML":"setText";return s[i](this._popoverHeader,this._settings.html&&this._settings.sanitize?this._settings.sanitize(t):t),t?s.show(this._popoverHeader):s.hide(this._popoverHeader),s[i](this._popoverBody,this._settings.html&&this._settings.sanitize?this._settings.sanitize(e):e),this.update()}show(){return this._enabled?(this._animating||s.isConnected(this._popover)||!s.triggerOne(this._node,"show.ui.popover")||(this._animating=!0,s.addClass(this._popover,"show"),this.refresh(),this._show(),s.fadeIn(this._popover,{duration:this._settings.duration}).then(t=>{s.triggerEvent(this._node,"shown.ui.popover")}).catch(t=>{}).finally(t=>{this._animating=!1})),this):this}toggle(){return s.isConnected(this._popover)?this.hide():this.show()}update(){return this._popper&&this._popper.update(!0),this}}Object.assign(m.prototype,{_events(){const t=t=>{this._enabled&&this._animating&&(s.stop(this._popover),this._animating=!1)};this._triggers.includes("hover")&&(s.addEvent(this._node,"mouseover.ui.popover",e=>{t(),this.show()}),s.addEvent(this._node,"mouseout.ui.popover",e=>{t(),this.hide()})),this._triggers.includes("focus")&&(s.addEvent(this._node,"focus.ui.popover",e=>{t(),this.show()}),s.addEvent(this._node,"blur.ui.popover",e=>{t(),this.hide()})),this._triggers.includes("click")&&s.addEvent(this._node,"click.ui.popover",e=>{e.preventDefault(),t(),this.toggle()}),this._modal&&s.addEvent(this._modal,"hide.ui.modal",t=>{this.hide()})}}),Object.assign(m.prototype,{_render(){this._popover=s.parseHTML(this._settings.template).shift(),this._settings.customClass&&s.addClass(this._popover,this._settings.customClass),this._arrow=s.find(".popover-arrow",this._popover),this._popoverHeader=s.find(".popover-header",this._popover),this._popoverBody=s.find(".popover-body",this._popover)},_show(){this._settings.appendTo?s.append(this._settings.appendTo,this._popover):s.after(this._node,this._popover),this._popper=new h(this._popover,{reference:this._node,arrow:this._arrow,placement:this._settings.placement,position:this._settings.position,fixed:this._settings.fixed,spacing:this._settings.spacing,minContact:this._settings.minContact}),t.requestAnimationFrame(t=>{this.update()})}}),m.defaults={template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',customClass:null,duration:100,enable:!0,html:!1,appendTo:null,sanitize:t=>s.sanitize(t),trigger:"click",placement:"auto",position:"center",fixed:!1,spacing:3,minContact:!1},r.initComponent("popover",m),r.Popover=m;class f extends a{constructor(t,e){super(t,e);const i=r.getTargetSelector(this._node);this._target=s.findOne(i),this._siblings=s.siblings(this._node)}dispose(){this._target=null,this._siblings=null,super.dispose()}hide(){return!this._animating&&s.hasClass(this._target,"active")&&s.triggerOne(this._node,"hide.ui.tab")?(this._animating=!0,s.fadeOut(this._target,{duration:this._settings.duration}).then(t=>{s.removeClass(this._target,"active"),s.removeClass(this._node,"active"),s.setAttribute(this._node,"aria-selected",!1),s.triggerEvent(this._node,"hidden.ui.tab")}).catch(t=>{}).finally(t=>{this._animating=!1}),this):this}show(){if(this._animating||s.hasClass(this._target,"active")||!s.triggerOne(this._node,"show.ui.tab"))return this;const t=this._siblings.find(t=>s.hasClass(t,"active"));let e;if(t&&(e=this.constructor.init(t),e._animating))return this;if(!s.triggerOne(this._node,"show.ui.tab"))return this;const i=t=>{this._animating=!0,s.addClass(this._target,"active"),s.addClass(this._node,"active"),s.fadeIn(this._target,{duration:this._settings.duration}).then(t=>{s.setAttribute(this._node,"aria-selected",!0),s.triggerEvent(this._node,"shown.ui.tab")}).catch(t=>{}).finally(t=>{this._animating=!1})};return e?s.triggerOne(t,"hide.ui.tab")?(s.addEventOnce(t,"hidden.ui.tab",t=>{i()}),e.hide(),this):this:(i(),this)}}s.addEventDelegate(o,"click.ui.tab",'[data-ui-toggle="tab"]',t=>{t.preventDefault();f.init(t.currentTarget).show()}),f.defaults={duration:100},r.initComponent("tab",f),r.Tab=f;class v extends a{constructor(t,e){super(t,e),this._settings.autohide&&setTimeout(t=>this.hide(),this._settings.delay)}hide(){return!this._animating&&s.isVisible(this._node)&&s.triggerOne(this._node,"hide.ui.toast")?(this._animating=!0,s.fadeOut(this._node,{duration:this._settings.duration}).then(t=>{s.setStyle(this._node,"display","none",!0),s.removeClass(this._node,"show"),s.triggerEvent(this._node,"hidden.ui.toast")}).catch(t=>{}).finally(t=>{this._animating=!1}),this):this}show(){return this._animating||s.isVisible(this._node)||!s.triggerOne(this._node,"show.ui.toast")||(this._animating=!0,s.setStyle(this._node,"display",""),s.addClass(this._node,"show"),s.fadeIn(this._node,{duration:this._settings.duration}).then(t=>{s.triggerEvent(this._node,"shown.ui.toast")}).catch(t=>{}).finally(t=>{this._animating=!1})),this}}s.addEventDelegate(o,"click.ui.toast",'[data-ui-dismiss="toast"]',t=>{t.preventDefault();const e=r.getTarget(t.currentTarget,".toast");v.init(e,{autohide:!1}).hide()}),v.defaults={autohide:!0,delay:5e3,duration:100},r.initComponent("toast",v),r.Toast=v;class w extends a{constructor(t,e){super(t,e),this._modal=s.closest(this._node,".modal").shift(),this._triggers=this._settings.trigger.split(" "),this._render(),this._events(),this._settings.enable&&this.enable(),this.refresh()}dispose(){if(s.hasDataset(this._node,"uiOriginalTitle")){const t=s.getDataset(this._node,"uiOriginalTitle");s.setAttribute(this._node,"title",t),s.removeDataset(this._node,"uiOriginalTitle")}this._popper&&(this._popper.dispose(),this._popper=null),s.remove(this._tooltip),this._triggers.includes("hover")&&(s.removeEvent(this._node,"mouseover.ui.tooltip"),s.removeEvent(this._node,"mouseout.ui.tooltip")),this._triggers.includes("focus")&&(s.removeEvent(this._node,"focus.ui.tooltip"),s.removeEvent(this._node,"blur.ui.tooltip")),this._triggers.includes("click")&&s.removeEvent(this._node,"click.ui.tooltip"),this._modal&&s.removeEvent(this._modal,"hide.ui.modal"),this._modal=null,this._triggers=null,this._tooltip=null,this._tooltipInner=null,this._arrow=null,super.dispose()}disable(){return this._enabled=!1,this}enable(){return this._enabled=!0,this}hide(){return this._enabled&&!this._animating&&s.isConnected(this._tooltip)&&s.triggerOne(this._node,"hide.ui.tooltip")?(this._animating=!0,s.fadeOut(this._tooltip,{duration:this._settings.duration}).then(t=>{this._popper.dispose(),this._popper=null,s.removeClass(this._tooltip,"show"),s.detach(this._tooltip),s.triggerEvent(this._node,"hidden.ui.tooltip")}).catch(t=>{}).finally(t=>{this._animating=!1}),this):this}refresh(){if(s.hasAttribute(this._node,"title")){const t=s.getAttribute(this._node,"title");s.setDataset(this._node,"uiOriginalTitle",t),s.removeAttribute(this._node,"title")}let t="";s.hasDataset(this._node,"uiTitle")?t=s.getDataset(this._node,"uiTitle"):this._settings.title?t=this._settings.title:s.hasDataset(this._node,"uiOriginalTitle")&&(t=s.getDataset(this._node,"uiOriginalTitle",t));const e=this._settings.html?"setHTML":"setText";return s[e](this._tooltipInner,this._settings.html&&this._settings.sanitize?this._settings.sanitize(t):t),this.update()}show(){return this._enabled?(this._animating||s.isConnected(this._tooltip)||!s.triggerOne(this._node,"show.ui.tooltip")||(this._animating=!0,s.addClass(this._tooltip,"show"),this.refresh(),this._show(),s.fadeIn(this._tooltip,{duration:this._settings.duration}).then(t=>{s.triggerEvent(this._node,"shown.ui.tooltip")}).catch(t=>{}).finally(t=>{this._animating=!1})),this):this}toggle(){return s.isConnected(this._tooltip)?this.hide():this.show()}update(){return this._popper&&this._popper.update(!0),this}}return Object.assign(w.prototype,{_events(){const t=t=>{this._enabled&&this._animating&&(s.stop(this._tooltip),this._animating=!1)};this._triggers.includes("hover")&&(s.addEvent(this._node,"mouseover.ui.tooltip",e=>{t(),this.show()}),s.addEvent(this._node,"mouseout.ui.tooltip",e=>{t(),this.hide()})),this._triggers.includes("focus")&&(s.addEvent(this._node,"focus.ui.tooltip",e=>{t(),this.show()}),s.addEvent(this._node,"blur.ui.tooltip",e=>{t(),this.hide()})),this._triggers.includes("click")&&s.addEvent(this._node,"click.ui.tooltip",e=>{e.preventDefault(),t(),this.toggle()}),this._modal&&s.addEvent(this._modal,"hide.ui.modal",t=>{this.hide()})}}),Object.assign(w.prototype,{_render(){this._tooltip=s.parseHTML(this._settings.template).shift(),this._settings.customClass&&s.addClass(this._tooltip,this._settings.customClass),this._arrow=s.find(".tooltip-arrow",this._tooltip),this._tooltipInner=s.find(".tooltip-inner",this._tooltip)},_show(){this._settings.appendTo?s.append(this._settings.appendTo,this._tooltip):s.after(this._node,this._tooltip),this._popper=new h(this._tooltip,{reference:this._node,arrow:this._arrow,placement:this._settings.placement,position:this._settings.position,fixed:this._settings.fixed,spacing:this._settings.spacing,minContact:this._settings.minContact}),t.requestAnimationFrame(t=>{this.update()})}}),w.defaults={template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',customClass:null,duration:100,enable:!0,html:!1,trigger:"hover focus",appendTo:null,sanitize:t=>s.sanitize(t),placement:"auto",position:"center",fixed:!1,spacing:2,minContact:!1},r.initComponent("tooltip",w),r.Tooltip=w,s.addEventDelegate(o,"click",'[data-ui-toggle="clipboard"]',t=>{t.preventDefault();const i=t.currentTarget,n=e.extend({action:"copy",text:!1},r.getDataset(i));if(!["copy","cut"].includes(n.action))throw new Error("Invalid clipboard action");let a,h;if(n.text)a=n.text;else{const t=r.getTarget(i);s.is(t,"input, textarea")?h=t:a=s.getText(t)}const d=!h;d&&(h=s.create("textarea",{class:"visually-hidden position-fixed",value:a}),s.append(o.body,h)),s.select(h),s.exec(n.action)&&s.triggerEvent(i,"copied.ui.clipboard",{detail:{action:n.action,text:s.getValue(h)}}),d&&s.remove(h)}),s.addEventDelegate(o,"mousedown.ui.ripple",".ripple",t=>{const e=s.position(t.currentTarget,!0);r.ripple(t.currentTarget,t.pageX-e.x,t.pageY-e.y)}),r.ripple=(t,e,i,n=1e3)=>{const o=s.width(t),r=s.height(t),a=3*Math.max(o,r),h=s.create("span",{class:"ripple-effect",style:{left:e,top:i}});s.append(t,h),s.animate(h,(t,e)=>{s.setStyle(t,{transform:"scale("+Math.floor(e*a)+")",opacity:1-Math.pow(e,2)})},{duration:n}).finally(t=>{s.remove(h)})},s.addEventDelegate(o,"input.ui.text-expand",".text-expand",t=>{const e=t.currentTarget;s.setStyle(e,"height","inherit");const i=s.css(e,"borderTop"),n=s.css(e,"borderBottom"),o=s.scrollHeight(e)+parseInt(i)+parseInt(n);s.setStyle(e,"height",o)}),{UI:r}}));